<view class="ticket-detail-page">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="detail-header">
    <view class="header-back" bind:tap="goBack">
      <text class="back-icon">â€¹</text>
    </view>
    <text class="header-title">è½¦ç¥¨è¯¦æƒ…</text>
    <view class="header-placeholder"></view>
  </view>

  <!-- å‡ºå‘åœ°å’Œç›®çš„åœ° -->
  <view class="route-info">
    <view class="route-item">
      <text class="route-label">å‡ºå‘åœ°</text>
      <text class="route-value">{{departure}}</text>
    </view>
    <view class="route-swap" bind:tap="swapRoute">
      <text class="swap-icon">â‡„</text>
    </view>
    <view class="route-item">
      <text class="route-label">ç›®çš„åœ°</text>
      <text class="route-value">{{destination}}</text>
    </view>
  </view>

  <!-- æ—¥æœŸé€‰æ‹© -->
  <view class="date-section">
    <view class="date-display">
      <text class="date-label">æ—¥æœŸ</text>
      <text class="date-value">{{selectedDate}}</text>
    </view>
    <button class="date-btn" bind:tap="showDatePicker">é€‰æ‹©æ—¥æœŸ</button>
  </view>

  <!-- è­¦å‘Šæç¤º -->
  <view class="alert-banner">
    <text class="alert-text">ä»Šæ—¥è½¦ç¥¨ç´§å¼ </text>
  </view>

  <!-- è½¦ç¥¨åˆ—è¡¨ -->
  <view class="ticket-list">
    <view 
      class="ticket-item" 
      wx:for="{{ticketList}}" 
      wx:key="index"
    >
      <view class="ticket-time">
        <view class="time-group">
          <text class="time-value">{{item.departureTime}}</text>
          <text class="time-label">{{item.departure}}</text>
        </view>
        <view class="time-arrow">â†’</view>
        <view class="time-group">
          <text class="time-value">{{item.arrivalTime}}</text>
          <text class="time-label">{{item.destination}}</text>
        </view>
      </view>
      <view class="ticket-footer">
        <text class="ticket-price">Â¥{{item.price}}</text>
        <button class="buy-btn" bind:tap="onBuyTicket" data-index="{{index}}">è´­ä¹°</button>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨å®¢æœç”µè¯ -->
  <view class="service-footer">
    <view class="service-phone-btn" bind:tap="callService">
      <text class="phone-icon">ğŸ“</text>
      <text class="service-text">å®¢æœç”µè¯</text>
    </view>
  </view>

  <!-- æ—¥æœŸé€‰æ‹©å™¨ -->
  <t-popup visible="{{showDatePickerPopup}}" placement="bottom" bind:visible-change="onDatePickerClose">
    <view class="date-picker-popup">
      <view class="picker-header">
        <text class="picker-title">é€‰æ‹©æ—¥æœŸ</text>
        <view class="picker-close" bind:tap="closeDatePicker">å®Œæˆ</view>
      </view>
      <picker 
        mode="date" 
        value="{{selectedDate}}" 
        start="{{minDate}}"
        end="{{maxDate}}"
        bind:change="onDateChange"
      >
        <view class="picker-content">
          <text class="picker-value">{{selectedDate}}</text>
        </view>
      </picker>
    </view>
  </t-popup>

  <t-toast id="t-toast" />
</view>

